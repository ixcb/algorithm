# 希尔排序

### 维基百科
> 希尔排序，也称递减增量排序算法，是插入排序的一种更高效的改进版本。希尔排序是非稳定排序算法。

> 希尔排序是基于插入排序的以下两点性质而提出改进方法的:
1. 插入排序在对几乎已经排好序的数据操作时，效率高，即可以达到线性排序的效率
2. 但插入排序一般来说是低效的，因为插入排序每次只能将数据移动一位

> 假设有这样一组数[ 13 14 94 33 82 25 59 94 65 23 45 27 73 25 39 10 ]，如果我们以步长为5开始进行排序，我们可以通过将这列表放在有5列的表中来更好地描述算法，这样他们就应该看起来是这样：
>
    13 14 94 33 82
    25 59 94 65 23
    45 27 73 25 39
    10
> 然后我们对每列进行排序：
>
    10 14 73 25 23
    13 27 94 33 39
    25 59 94 65 82
    45
> 将上述四行数字，依序接在一起时我们得到：[ 10 14 73 25 23 13 27 94 33 39 25 59 94 65 82 45 ].这时10已经移至正确位置了，然后再以3为步长进行排序：
>
    10 14 73
    25 23 13
    27 94 33
    39 25 59
    94 65 82
    45
> 排序之后变为：
>
    10 14 13
    25 23 33
    27 25 59
    39 65 73
    45 94 82
    94
> 最后以1步长进行排序（此时就是简单的插入排序了）。

> 已知的最好步长序列是由Sedgewick提出的(1, 5, 19, 41, 109,...)，该序列的项来自![](https://wikimedia.org/api/rest_v1/media/math/render/svg/03753d2e4d51a4cd55c8f97307b18239c9cc06eb)和![](https://wikimedia.org/api/rest_v1/media/math/render/svg/fe5f1f8c431469bd3e1bd655ed134f30fb9f63d7)这两个算式。这项研究也表明“比较在希尔排序中是最主要的操作，而不是交换。”用这样步长序列的希尔排序比插入排序要快，甚至在小数组中比快速排序和堆排序还快，但是在涉及大量数据时希尔排序还是比快速排序慢。

```python
def shell_sort(arr):
    arr_len = len(arr)
    gap = arr_len / 2
    while gap > 0:
        for i in range(gap, arr_len):
            temp = arr[i]
            j = i
            while j >= gap and arr[j - gap] > temp:
                arr[j] = arr[j - gap]
                j -= gap
            arr[j] = temp
        gap = gap / 2
    return arr
```
